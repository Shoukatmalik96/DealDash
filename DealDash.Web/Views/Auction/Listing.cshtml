@model List<DealDash.Entities.Auction>
@{
    ViewBag.Title = "Listing";
}

<h2>Listing</h2>

<table class="table table-hover">
    <tr>
        <th scope="col">Title</th>
        <th scope="col">Description</th>
        <th scope="col">ActualAmount</th>
        <th scope="col">StartingTime</th>
        <th scope="col">EndingTime</th>
        <th scope="col">Actions</th>
    </tr>
    @foreach (var auction in Model)
    {
        <tr>
            <td>@auction.Title</td>
            <td>@auction.Description</td>
            <td>@auction.ActualAmount</td>
            <td>@auction.StartingTime</td>
            <td>@auction.EndingTime</td>
            <td>
                <Button class="editButton btn btn-primary" data-id="@auction.ID" data-toggle="modal" data-target="#formModal">Edit</Button>
                <Button class="deleteButton btn btn-danger" data-id="@auction.ID">Delete</Button>
            </td>

        </tr>
    }
</table>
<h2>Index</h2>
<div id="listingArea">


    <button type="button" id="createButton" class="btn btn-success" data-toggle="modal" data-target="#formModal">AddNewRecord</button>

    <script>

    $("#createButton").click(function () {

        $.ajax({
            url: "@Url.Action("Create","Auction")",
            type:"GET"
        }).done(function (response) {
            $("#contentArea").html(response);
        });
    });

        $(".editButton").click(function () {

            debugger;
            $.ajax({
                url: "@Url.Action("Edit","Auction")",
                type: "GET",
                data: {
                    ID: $(this).attr("data-id")
                }
            }).done(function (response) {
                $("#contentArea").html(response);
            });
        });

        $(".deleteButton").click(function () {

          debugger;

             var result = confirm("Are you sure you want to delete this Auction?");

            debugger;

            if (result == true) {
                $.ajax({
                    url: "@Url.Action("Delete","Auction")",
                    method: "post",
                    data: {
                        ID: $(this).attr("data-id")
                    }
                })
                    .done(function (response) {
                        debugger;
                        $("#listingArea").html(response);
                    });
             }
        });
    </script>
</div>